!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.vueYandexMaps=e()}(this,function(){"use strict";var t={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"ymap-container"},[r("div",{style:{width:"100%",height:"100%"},attrs:{id:t.ymapId}}),t._t("default")],2)},staticRenderFns:[],data:function(){return{ymapId:"yandexMap"+Math.round(1e5*Math.random())}},props:{coords:{type:Array,validator:function(t){return!t.filter(function(t){return isNaN(t)}).length},required:!0},zoom:{validator:function(t){return!isNaN(t)},default:18}},computed:{coordinates:function(){return this.coords.map(function(t){return+t})}},beforeCreate:function(){var t=this;if(!this.$ymapEventBus.scriptIsNotAttached)return!1;var e=document.createElement("SCRIPT");e.setAttribute("src","https://api-maps.yandex.ru/2.1/?lang=ru_RU"),e.setAttribute("async",""),e.setAttribute("defer",""),document.body.appendChild(e),this.$ymapEventBus.scriptIsNotAttached=!1,e.onload=function(){t.$ymapEventBus.ymapReady=!0,t.$ymapEventBus.$emit("scriptIsLoaded")}},created:function(){var t=this;window.addEventListener("DOMContentLoaded",function(){function e(){a=new ymaps.Map(this.ymapId,{center:this.coordinates,zoom:+this.zoom});for(var t=this.$slots.default.map(function(t){var e=t.componentOptions&&t.componentOptions.propsData;if(e)return{markerType:e.markerType,coords:o(e.coords),hintContent:e.hintContent,icon:e.icon,balloon:e.balloon,markerStroke:e.markerStroke,markerFill:e.markerFill,circleRadius:+e.circleRadius}}).filter(function(t){return t&&t.markerType}),e=0;e<t.length;e++){var i=n(t[e].markerType),c={hintContent:t[e].hintContent,balloonContentHeader:t[e].balloon&&t[e].balloon.header,balloonContentBody:t[e].balloon&&t[e].balloon.body,balloonContentFooter:t[e].balloon&&t[e].balloon.footer,iconContent:t[e].icon&&t[e].icon.content},s={preset:t[e].icon&&"islands#"+r(t[e])+"Icon",strokeColor:t[e].markerStroke&&t[e].markerStroke.color||"0066ffff",strokeOpacity:t[e].markerStroke&&t[e].markerStroke.opacity||1,strokeStyle:t[e].markerStroke&&t[e].markerStroke.style,strokeWidth:t[e].markerStroke&&t[e].markerStroke.width||1,fill:t[e].markerFill&&t[e].markerFill.enabled||!0,fillColor:t[e].markerFill&&t[e].markerFill.color||"0066ff99",fillOpacity:t[e].markerFill&&t[e].markerFill.opacity||1};"Circle"===i&&(t[e].coords=[t[e].coords,t[e].circleRadius]);var l=new ymaps[i](t[e].coords,c,s);a.geoObjects.add(l)}}function r(t){var e,r=t.icon.color||"blue";return e=t.icon.glyph?n(t.icon.glyph):t.icon.content?"Stretchy":"",r+e}function n(t){return t.charAt(0).toUpperCase()+t.slice(1)}function o(t){return t.map(function(t){return Array.isArray(t)?o(t):+t})}var a;t.$ymapEventBus.ymapReady?ymaps.ready(e.bind(t)):t.$ymapEventBus.$on("scriptIsLoaded",function(){ymaps.ready(e.bind(t))})})}},e={props:{coords:{type:Array,required:!0},hintContent:String,icon:Object,balloon:Object,markerType:{type:String,required:!0},markerFill:Object,markerStroke:Object,circleRadius:{validator:function(t){return!isNaN(t)},default:10}},render:function(){}},r=function(r){r.component("yandex-map",t),r.component("ymap-marker",e),r.prototype.$ymapEventBus=new r({data:{ymapReady:!1,scriptIsNotAttached:!0}})};return window.Vue&&(window.YMapPlugin=t,Vue.use(r)),t.install=r,t});
